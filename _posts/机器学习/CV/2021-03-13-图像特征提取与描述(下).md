---
layout:     post                    # 使用的布局（不需要改）
title:      图像特征提取-下			    # 标题 
subtitle:   Fast、ORB、LBP算子、HOG算子	    # 副标题
date:       2021-03-13              # 时间
author:     新宇                     # 作者
header-img: img/post-bg-2015.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               # 标签
    - CV
---
# 一、Fast和ORB算法
## 1 Fast算法

### 1.1 原理
- 前面已经介绍过几个特征检测器，它们的效果都很好，特别是SIFT和SURF算法，但是从实时处理的角度来看，效率还是太低了。
- 为了解决这个问题，Edward Rosten和Tom Drummond在2006年提出了FAST算法，并在2010年对其进行了修正。
- FAST (全称Features from accelerated segment test)是一种用于角点检测的算法，该算法的原理是取图像中检测点，以该点为圆心的周围邻域内像素点判断检测点是否为角点，通俗的讲就是若一个像素周围有一定数量的像素与该点像素值不同，则认为其为角点。

### 1.2 FAST算法的基本流程
![](https://tva1.sinaimg.cn/large/008eGmZEly1goik7rzctcj30nz0h8wkk.jpg)

### 1.3 机器学习的角点检测器
- 选择一组训练图片(最好是跟最后应用相关的图片)
- 使用 FAST 算法找出每幅图像的特征点，对图像中的每一个特征点，将其周围的 16 个像素存储构成一个向量P。
	- ![](https://tva1.sinaimg.cn/large/008eGmZEly1goik8s216bj30lw0artbj.jpg)
- 每一个特征点的 16 像素点都属于下列三类中的一种
	- ![](https://tva1.sinaimg.cn/large/008eGmZEly1goik95by6ij30ct03taas.jpg)
- 根据这些像素点的分类，特征向量 P 也被分为 3 个子集:Pd ，Ps ，Pb，
- 定义一个新的布尔变量Kp，如果 p 是角点就设置为 Ture，如果不是就设置为 False。 
- 利用特征值向量p，目标值是$K_p$，训练ID3 树(决策树分类器)。
- 将构建好的决策树运用于其他图像的快速的检测。

### 1.4 非极大值抑制
![](https://tva1.sinaimg.cn/large/008eGmZEly1goik9y7pp1j30oo06qwfo.jpg)

### 1.5 代码
```python
import numpy as np
import cv2 as cv
from matplotlib import pyplot as plt
# 1 读取图像

img = cv.imread('./image/tv.jpg')
# 2 Fast角点检测
# 2.1 创建一个Fast对象，传入阈值，注意:可以处理彩色空间图像 

fast = cv.FastFeatureDetector_create(threshold=30)
# 2.2 检测图像上的关键点

kp = fast.detect(img,None)
# 2.3 在图像上绘制关键点

img2 = cv.drawKeypoints(img, kp, None, color=(0,0,255))
# 2.4 输出默认参数

print( "Threshold: {}".format(fast.getThreshold()) )
print( "nonmaxSuppression:{}".format(fast.getNonmaxSuppression()) ) 
print( "neighborhood: {}".format(fast.getType()) )
print( "Total Keypoints with nonmaxSuppression: {}".format(len(kp)) )
# 2.5 关闭非极大值抑制 fast.setNonmaxSuppression(0) kp = fast.detect(img,None)

print( "Total Keypoints without nonmaxSuppression: {}".format(len(kp)) ) 
# 2.6 绘制为进行非极大值抑制的结果

img3 = cv.drawKeypoints(img, kp, None, color=(0,0,255))
# 3 绘制图像 

fig,axes=plt.subplots(nrows=1,ncols=2,figsize=(10,8),dpi=100) 
axes[0].imshow(img2[:,:,::-1]) 
axes[0].set_title("加入非极大值抑制") 
axes[1].imshow(img3[:,:,::-1]) 
axes[1].set_title("未加入非极大值抑制")
plt.show()
```
![](https://tva1.sinaimg.cn/large/008eGmZEly1goikbecrscj30n10al4b6.jpg)

## 2 ORB算法
### 2.1 ORB算法流程
![](https://tva1.sinaimg.cn/large/e6c9d24ely1gojmbcup5bj20nr0ig0xl.jpg)
![](https://tva1.sinaimg.cn/large/e6c9d24ely1gojmbr7yh4j20mt08kt9j.jpg)

### 2.2 BRIEF算法
![](https://tva1.sinaimg.cn/large/e6c9d24ely1gojmc8al9qj20my09x764.jpg)
![](https://tva1.sinaimg.cn/large/e6c9d24ely1gojmcnwe90j20mq0h4duq.jpg)
![](https://tva1.sinaimg.cn/large/e6c9d24ely1gojmcys1u6j20n50dr781.jpg)

### 2.3 算法实现
```python
import numpy as np
import cv2 as cv
from matplotlib import pyplot as plt 
# 1 图像读取

img = cv.imread('./image/tv.jpg')
# 2 ORB角点检测
# 2.1 实例化ORB对象

orb = cv.ORB_create(nfeatures=500)
# 2.2 检测关键点,并计算特征描述符

kp,des = orb.detectAndCompute(img,None)
print(des.shape)
# 3 将关键点绘制在图像上

img2 = cv.drawKeypoints(img, kp, None, color=(0,0,255), flags=0)
# 4. 绘制图像 
plt.figure(figsize=(10,8),dpi=100) 
plt.imshow(img2[:,:,::-1]) 
plt.xticks([]), plt.yticks([]) 
plt.show()
```
# 二、LBP和HOG特征算子
## 1. LBP算法

## 2. HOG算法
















